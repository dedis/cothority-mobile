<!DOCTYPE html>
<html lang="en">

<html>

<head>
    <meta name="author" content="Lucio Romerio">
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />

    <!-- Prevent scroll on iOS -->
    <script type="text/javascript">
        window.addEventListener('load', function() {
            document.body.addEventListener('touchmove', function(e) {
                e.preventDefault();
            }, false);
        }, false);
    </script>

    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <link rel="stylesheet" type="text/css" href="css/sidebar.css" />

    <title>Cothority Mobile</title>

    <script src="js/sidebar.js"></script>
</head>

<body>
    <!-- Sidebar content -->
    <div id="mySidenav" class="sidenav">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav('')">&times;</a>
        <a onclick="closeNav('index.html')">Home</a>
        <a onclick="closeNav('cisc.html')">Cisc</a>
        <a onclick="closeNav('keyManager.html')">Key Manager</a>
        <a onclick="closeNav('conodeStatus.html')">Contact Conode</a>
        <a onclick="closeNav('pinRequest.html')">Debug PinRequest</a>
    </div>
    <!-- Sidebar open icon -->
    <span id="open_menu" onclick="openNav()">
            <img src="img/menu.png" alt="MENU">
        </span>
    <hr>

    <!-- Page content -->
    <div data-role="page" id="main">
        <div data-role="main" class="ui-content">

            <!-- Phase 1 (ConfigUpdate -->
            <p id="cisc_first" style="display: block">
                Print conode qr-code using <i>cisc id qr</i>, then scan it in order to connect the
                device to the conode and start the procedure. <br/>

                <a target="_blank" href="javascript:qrcodeScan(function(r) {ciscQrScanned(r)});">
                    <button type="button">Scan</button>
                </a>
            </p>
            <!-- Phase 2 (ProposeSend) -->
            <p id="cisc_second" style="display: none">
                Successfully paired! <br/><br/>

                <label for="keyPairName">Insert a unique id: </label><br/>
                <input id="keyPairName"/> <br/><br/>

                Now insert a unique id for this conode. This id will identify the device between
                all devices registered to the conode, as well as your keys pair locally.

                <a href="javascript:ciscPropose(function(r) {ciscPropose_handler(r)});">
                    <button type="button">Propose</button>
                </a>
            </p>
            <!-- Phase 3 (Verification) -->
            <p id="cisc_third" style="display: none">
                Threshold: <b id="threshold"></b> <br/><br/>

                Vote your proposition from your conode using <i>cisc config vote</i>.
                Once the threshold is reached, your proposition we'll be accepted, and you'll be able
                to verify that the procedure has been completed with success. <br/>

                <a href="javascript:ciscVerification();">
                    <button type="button">Verify</button>
                </a>
            </p>
            <!-- Phase 4 (done) -->
            <p id="cisc_fourth" style="display: none"></p>

        </div>
    </div>

    <!-- Import .js files needed -->
    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
    <script type="text/javascript" src="cordova.js"></script>

    <script type="text/javascript" src="js/cisc.js"></script>
    <script type="text/javascript" src="js/utils.js"></script>
    <script type="text/javascript" src="js/webSocket.js"></script>
    <script type="text/javascript" src="js/qrcode.js"></script>
    <script type="text/javascript" src="js/databaseHelper.js"></script>
    <script type="text/javascript" src="js/lib/protobuf.js"></script>
    <script type="text/javascript" src="js/lib/cothority-messages.js"></script>
    <script type="text/javascript" src="js/lib/crypto-js.js"></script>
</body>

</html>